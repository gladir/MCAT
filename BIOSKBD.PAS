(********************************************************)
(*                                                      *)
(*                Malte System/BIOS Key                 *)
(*                    1993/03/28                        *)
(*                                                      *)
(*      Copyright (C) par les Chevaliers de Malte       *)
(*                                                      *)
(********************************************************)

Unit BIOSKbd;

(********************************************************)
                      INTERFACE
(********************************************************)

Procedure PushKey(Key:Word);

Function GetModeInsert:Boolean;
Function KeyFlags:Byte;
Function NextKey:Word;
Function ReadKey:Word;
Function ReadKeyAT:Word;

(********************************************************)
                    IMPLEMENTATION
(********************************************************)

{ Ŀ
                         PushKey                        
  
    }

Procedure PushKey(Key:Word);
Assembler;
ASM
 MOV AH,$05;
 MOV CX,Key;
 INT $16;
END;

{ Ŀ
                      GetModeInsert                     
  
    }

Function GetModeInsert:Boolean;
Assembler;
ASM
 MOV AH,$02;
 INT $16;
 {$IFOPT G+}
  SHR AL,7;
 {$ELSE}
  ROL AL,1;
  AND AL,1;
 {$ENDIF}
END;

{ Ŀ
                         KeyFlags                       
  
    }

Function KeyFlags:Byte;
Assembler;
ASM
 MOV AH,$02;
 INT $16;
END;

{ Ŀ
                          NextKey                       
  
    }

Function NextKey:Word;
Assembler;
ASM
 MOV AH,$01;
 INT $16;
END;

{ Ŀ
                          ReadKey                       
  
    }

Function ReadKey:Word;
Assembler;
ASM
 XOR AH,AH;
 INT $16;
END;

{ Ŀ
                         ReadKeyAT                      
  
    }

Function ReadKeyAT:Word;
Assembler;
ASM
 MOV AH,$10;
 INT $16;
END;

BEGIN
END.